{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"type": "object",
	"properties": {
		"notification": {
			"allOf": [
				{
					"type": "object",
					"properties": {
						"id": { "type": "string" },
						"timestamp": { "type": "string", "format": "date-time" }
					},
					"required": ["id", "timestamp"]
				},
				{
					"type": "object",
					"properties": {
						"content": {
							"oneOf": [
								{
									"type": "object",
									"properties": {
										"type": {
											"type": "string",
											"enum": ["text"]
										},
										"message": { "type": "string" }
									},
									"required": ["type", "message"]
								},
								{
									"type": "object",
									"properties": {
										"type": {
											"type": "string",
											"enum": ["action"]
										},
										"buttons": {
											"type": "array",
											"items": {
												"anyOf": [
													{
														"type": "object",
														"properties": {
															"label": {
																"type": "string"
															},
															"url": {
																"type": "string"
															}
														},
														"required": [
															"label",
															"url"
														]
													},
													{
														"type": "object",
														"properties": {
															"label": {
																"type": "string"
															},
															"action": {
																"type": "string"
															}
														},
														"required": [
															"label",
															"action"
														]
													}
												]
											},
											"minItems": 1
										}
									},
									"required": ["type", "buttons"]
								}
							]
						}
					},
					"required": ["content"]
				}
			],
			"description": "A notification that combines base fields with content that can be either text or action buttons"
		}
	},
	"required": ["notification"]
}
