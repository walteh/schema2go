```json
{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Parent",
	"type": "object",
	"required": ["child"],
	"properties": {
		"child": {
			"type": "object",
			"required": ["name"],
			"properties": {
				"name": {
					"type": "string"
				}
			}
		}
	}
}
```

```go
// Code generated by schema2go. DO NOT EDIT.
// üèóÔ∏è Generated from JSON Schema

package models

import (
    "encoding/json"
    "gitlab.com/tozd/go/errors"
)

type Child struct {
    Name string `json:"name"` // Required
}

// Validate ensures all required fields are present and valid
func (x *Child) Validate() error {
    if x.Name == "" {
        return errors.New("name is required")
    }
    return nil
}

// MarshalJSON implements json.Marshaler
func (x Child) MarshalJSON() ([]byte, error) {
    // Validate before marshaling
    if err := x.Validate(); err != nil {
        return nil, errors.Errorf("validating before marshal: %w", err)
    }

    // Use alias to avoid infinite recursion
    type Alias Child
    return json.Marshal((*Alias)(&x))
}

type Parent struct {
    Child Child `json:"child"` // Required
}

// Validate ensures all required fields are present and valid
func (x *Parent) Validate() error {
    if err := x.Child.Validate(); err != nil {
        return errors.Errorf("validating child: %w", err)
    }
    return nil
}

// MarshalJSON implements json.Marshaler
func (x Parent) MarshalJSON() ([]byte, error) {
    // Validate before marshaling
    if err := x.Validate(); err != nil {
        return nil, errors.Errorf("validating before marshal: %w", err)
    }

    // Use alias to avoid infinite recursion
    type Alias Parent
    return json.Marshal((*Alias)(&x))
}
```
