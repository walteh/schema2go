# input

```json
{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "AllOfExample",
	"type": "object",
	"allOf": [
		{
			"type": "object",
			"properties": {
				"name": {
					"type": "string"
				}
			}
		},
		{
			"type": "object",
			"properties": {
				"age": {
					"type": "integer"
				}
			}
		}
	]
}
```

---

# expected-output

```go
// Code generated by schema2go. DO NOT EDIT.
// üèóÔ∏è Generated from JSON Schema

package models

import (
    "encoding/json"
    "gitlab.com/tozd/go/errors"
)

type AllOfExample struct {
    Name_AllOf *string `json:"name,omitempty"`
    Age_AllOf  *int    `json:"age,omitempty"`
}

// UnmarshalJSON implements json.Unmarshaler
func (x *AllOfExample) UnmarshalJSON(data []byte) error {
    // Create an alias to avoid infinite recursion
    type Alias AllOfExample
    aux := &struct {
        *Alias
    }{
        Alias: (*Alias)(x),
    }

    // First unmarshal into our alias struct
    if err := json.Unmarshal(data, &aux); err != nil {
        return errors.Errorf("unmarshaling allOf fields: %w", err)
    }

	if err := x.Validate(); err != nil {
		return errors.Errorf("validating after unmarshal: %w", err)
	}

    return nil
}

func (x *AllOfExample) Validate() error {
    return nil
}

// MarshalJSON implements json.Marshaler
func (x AllOfExample) MarshalJSON() ([]byte, error) {
    // Create an alias to avoid infinite recursion
    type Alias AllOfExample

    // Marshal the alias struct
    return json.Marshal((*Alias)(&x))
}
```

---

# expected-raw-schema

```go
&jsonschema.Schema{
		Title: ptr("AllOfExample"),
		Type: typ("object"),
		AllOf: ptr([]*jsonschema.Schema{
			{
				Type: typ("object"),
				Properties: &[]*jsonschema.NamedSchema{
					{Name: "name", Value: &jsonschema.Schema{Type: typ("string")}},
				},
			},
			{
				Type: typ("object"),
				Properties: &[]*jsonschema.NamedSchema{
					{Name: "age", Value: &jsonschema.Schema{Type: typ("integer")}},
				},
			},
		}),
	}
```

---

# expected-schema-model-mock

```go
var mockField1 = mockery.NewMockField_generator(t)
mockField1.EXPECT().Description().Return("name")
mockField1.EXPECT().Type().Return("string")
mockField1.EXPECT().IsRequired().Return(false)
mockField1.EXPECT().IsEnum().Return(false)
mockField1.EXPECT().EnumTypeName().Return("")
mockField1.EXPECT().EnumValues().Return([]*generator.EnumValue{})
mockField1.EXPECT().DefaultValue().Return(nil)
mockField1.EXPECT().DefaultValueComment().Return(nil)
mockField1.EXPECT().ValidationRules().Return([]*generator.ValidationRule{})

var mockField2 = mockery.NewMockField_generator(t)
mockField2.EXPECT().Description().Return("age")
mockField2.EXPECT().Type().Return("integer")
mockField2.EXPECT().IsRequired().Return(false)
mockField2.EXPECT().IsEnum().Return(false)
mockField2.EXPECT().EnumTypeName().Return("")
mockField2.EXPECT().EnumValues().Return([]*generator.EnumValue{})
mockField2.EXPECT().DefaultValue().Return(nil)
mockField2.EXPECT().DefaultValueComment().Return(nil)
mockField2.EXPECT().ValidationRules().Return([]*generator.ValidationRule{})

var mockStruct = mockery.NewMockStruct_generator(t)
mockStruct.EXPECT().Description().Return("AllOfExample")
mockStruct.EXPECT().Fields().Return([]generator.Field{mockField1, mockField2})
mockStruct.EXPECT().HasAllOf().Return(true)
mockStruct.EXPECT().HasCustomMarshaling().Return(false)
mockStruct.EXPECT().HasDefaults().Return(false)
mockStruct.EXPECT().HasValidation().Return(false)

var mockSchema = mockery.NewMockSchema_generator(t)
mockSchema.EXPECT().Enums().Return([]*generator.EnumModel{})
mockSchema.EXPECT().Imports().Return([]string{})
mockSchema.EXPECT().Package().Return("models")
mockSchema.EXPECT().Structs().Return([]generator.Struct{mockStruct})
```
